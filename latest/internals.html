<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simulation Internals · Crispulator.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="Crispulator.jl logo"/></a><h1>Crispulator.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="tutorial.html">Tutorial</a></li><li><a class="toctext" href="custom.html">Custom Simulations</a></li><li class="current"><a class="toctext" href="internals.html">Simulation Internals</a><ul class="internal"><li><a class="toctext" href="#Contents-1">Contents</a></li><li><a class="toctext" href="#Index-1">Index</a></li><li><a class="toctext" href="#Simulation-Types-1">Simulation Types</a></li><li><a class="toctext" href="#Key-functions-1">Key functions</a></li><li><a class="toctext" href="#Miscellaneous-Types-1">Miscellaneous Types</a></li><li><a class="toctext" href="#Miscellaneous-functions-1">Miscellaneous functions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="internals.html">Simulation Internals</a></li></ul><a class="edit-page" href="https://github.com/tlnagy/Crispulator.jl/blob/master/docs/src/internals.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Simulation Internals</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Simulation-Internals-1" href="#Simulation-Internals-1">Simulation Internals</a></h1><p>More in-depth documentation on specific types and functions.</p><h2><a class="nav-anchor" id="Contents-1" href="#Contents-1">Contents</a></h2><ul><li><a href="internals.html#Simulation-Internals-1">Simulation Internals</a></li><ul><li><a href="internals.html#Contents-1">Contents</a></li><li><a href="internals.html#Index-1">Index</a></li><li><a href="internals.html#Simulation-Types-1">Simulation Types</a></li><li><a href="internals.html#Key-functions-1">Key functions</a></li><li><a href="internals.html#Miscellaneous-Types-1">Miscellaneous Types</a></li><li><a href="internals.html#Miscellaneous-functions-1">Miscellaneous functions</a></li></ul></ul><h2><a class="nav-anchor" id="Index-1" href="#Index-1">Index</a></h2><ul><li><a href="internals.html#Simulation.Barcode"><code>Simulation.Barcode</code></a></li><li><a href="internals.html#Simulation.CRISPRi"><code>Simulation.CRISPRi</code></a></li><li><a href="internals.html#Simulation.CRISPRn"><code>Simulation.CRISPRn</code></a></li><li><a href="internals.html#Simulation.Cas9Behavior"><code>Simulation.Cas9Behavior</code></a></li><li><a href="internals.html#Simulation.Delta"><code>Simulation.Delta</code></a></li><li><a href="internals.html#Simulation.FacsScreen"><code>Simulation.FacsScreen</code></a></li><li><a href="internals.html#Simulation.GrowthScreen"><code>Simulation.GrowthScreen</code></a></li><li><a href="internals.html#Simulation.KDPhenotypeRelationship"><code>Simulation.KDPhenotypeRelationship</code></a></li><li><a href="internals.html#Simulation.Library"><code>Simulation.Library</code></a></li><li><a href="internals.html#Base.Sort.select"><code>Base.Sort.select</code></a></li><li><a href="internals.html#Simulation.auprc"><code>Simulation.auprc</code></a></li><li><a href="internals.html#Simulation.auroc"><code>Simulation.auroc</code></a></li><li><a href="internals.html#Simulation.construct_library"><code>Simulation.construct_library</code></a></li><li><a href="internals.html#Simulation.counts_to_freqs"><code>Simulation.counts_to_freqs</code></a></li><li><a href="internals.html#Simulation.differences_between_bins"><code>Simulation.differences_between_bins</code></a></li><li><a href="internals.html#Simulation.linear"><code>Simulation.linear</code></a></li><li><a href="internals.html#Simulation.noise"><code>Simulation.noise</code></a></li><li><a href="internals.html#Simulation.sequencing"><code>Simulation.sequencing</code></a></li><li><a href="internals.html#Simulation.sigmoid"><code>Simulation.sigmoid</code></a></li><li><a href="internals.html#Simulation.signal"><code>Simulation.signal</code></a></li><li><a href="internals.html#Simulation.transfect"><code>Simulation.transfect</code></a></li><li><a href="internals.html#Simulation.venn"><code>Simulation.venn</code></a></li></ul><h2><a class="nav-anchor" id="Simulation-Types-1" href="#Simulation-Types-1">Simulation Types</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.FacsScreen" href="#Simulation.FacsScreen"><code>Simulation.FacsScreen</code></a> — <span class="docstring-category">Type</span>.</div><div><p>A type representing the parameters used in a typical FACS screen.</p><ul><li><p><code>num_genes</code></p><p>Number of genes targeted by the screen</p></li><li><p><code>coverage</code></p><p>Number of guides per gene</p></li><li><p><code>representation</code></p><p>Number of cells with each guide. <code>representation=10</code> means that there are 10 times as many cells as guides during transfection. The actual number of cells per guide post-transfection will be less depending on the MOI</p></li><li><p><code>moi</code></p><p>The multiplicity of infection, <span>$\lambda$</span>, of the screen. We model this as a Poisson process during transfection (see <a href="internals.html#Simulation.transfect"><code>Simulation.transfect</code></a>).</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>We <strong>do not</strong> model multiple infections. We assume that the MOI is properly selected and less than half the cells are transfected by any virus, i.e. <span>$\lambda \lt 0.5$</span> and then select only the cells that have a single transfection occurrence:</p><div>\[P(x = 1; Poisson(λ))\]</div><p>For <span>$\lambda = 0.25$</span> this works out to being <span>$\approx 19.5\%$</span> of the number of cells (<code>num_genes</code> * <code>coverage</code> * <code>representation</code>).</p></div></div></li></ul><ul><li><p><code>σ</code></p><p>The standard deviation expected for cells during FACS sorting. This should be set according to the biological variance experimentally observed, e.g. in the fluorescence intensity of isogenic cells</p></li><li><p><code>bin_info</code></p><p>Range of guide phenotypes to collect in each bin</p><h1>Example</h1><p>In the following example</p><pre><code class="language-julia">p = 0.05
bin_info = Dict(:bin1 =&gt; (0.0, p), :bin2 =&gt; (1.0-p, 1.0))</code></pre><p>The 5th percentile of cells sorted according to their phenotype (fluorescence, size, etc) will be compared to the 95th percentile.</p></li></ul><ul><li><p><code>bottleneck_representation</code></p><p>Number of cells sorted expressed as an integer multiple of the number of guides</p></li><li><p><code>seq_depth</code></p><p>Sequencing depth as a integer multiple of the number of guides, i.e. <code>seq_depth=10</code> is equivalent to <code>10 * num_genes * coverage</code> reads.</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/common.jl#L50-L54">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.GrowthScreen" href="#Simulation.GrowthScreen"><code>Simulation.GrowthScreen</code></a> — <span class="docstring-category">Type</span>.</div><div><p>A type representing the parameters used in a typical growth-based screen.</p><ul><li><p><code>num_genes</code></p><p>Number of genes targeted by the screen</p></li><li><p><code>coverage</code></p><p>Number of guides per gene</p></li><li><p><code>representation</code></p><p>Number of cells with each guide. <code>representation=10</code> means that there are 10 times as many cells as guides during transfection. The actual number of cells per guide post-transfection will be less depending on the MOI</p></li><li><p><code>moi</code></p><p>The multiplicity of infection, <span>$\lambda$</span>, of the screen. We model this as a Poisson process during transfection (see <a href="internals.html#Simulation.transfect"><code>Simulation.transfect</code></a>).</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>We <strong>do not</strong> model multiple infections. We assume that the MOI is properly selected and less than half the cells are transfected by any virus, i.e. <span>$\lambda \lt 0.5$</span> and then select only the cells that have a single transfection occurrence:</p><div>\[P(x = 1; Poisson(λ))\]</div><p>For <span>$\lambda = 0.25$</span> this works out to being <span>$\approx 19.5\%$</span> of the number of cells (<code>num_genes</code> * <code>coverage</code> * <code>representation</code>).</p></div></div></li></ul><ul><li><p><code>seq_depth</code></p><p>Sequencing depth as a integer multiple of the number of guides, i.e. <code>seq_depth=10</code> is equivalent to <code>10 * num_genes * coverage</code> reads.</p></li></ul><ul><li><p><code>bottleneck_representation</code></p><p>For growth screens, how much of a bottleneck is applied. This is minimum number of cells that is kept when passaging the pool of cells. This is expressed as an integer multiple of the number of guides.</p></li><li><p><code>num_bottlenecks</code></p><p>For growth screens, how many bottlenecks are applied. This is the integer number of passages during the growth screen.</p></li><li><p><code>noise</code></p><p>Before each passage, the theoretical phenotype of each cell is convolved with a normal noise distribution with a standard deviation, σ, dictated by this parameter. This should be set based on an expectation of noisiness of the subsampling</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/common.jl#L120-L124">source</a></section><h2><a class="nav-anchor" id="Key-functions-1" href="#Key-functions-1">Key functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.construct_library" href="#Simulation.construct_library"><code>Simulation.construct_library</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">construct_library(setup, lib)
</code></pre><p>Constructs the guide library for <code>N</code> genes with <code>coverage</code> number of guides per gene. Returns a tuple of guides and their relative frequencies (assigned randomly).</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L218">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.transfect" href="#Simulation.transfect"><code>Simulation.transfect</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">transfect(setup, lib, guides, guide_freqs_dist)
</code></pre><p>Simulates the transfection the of the library of guides (<code>guides</code>) according to the parameters in <a href="internals.html#Simulation.Library"><code>Simulation.Library</code></a> <code>lib</code> and the frequencies represented by the Categorical distribution <code>guide_freqs_dist</code>.</p><p>This function creates a population of cells post-transfection where each cell has single guide RNA present according to the frequencies of the guides in the present in the library. The cells are then grown up so that there are <code>setup.bottleneck_representation * num_guides</code> of them. For FACS screens we assume a simple linear expansion of the cells, while for Growth screens the cells grow according as a function of their phenotype and degree of knockdown.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/transfection.jl#L30">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.Sort.select" href="#Base.Sort.select"><code>Base.Sort.select</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">select(setup, cells, cell_phenotypes, guides; debug)
</code></pre><p>Given <code>cells</code>, a vector of integers, and <code>guides</code>, a vector of barcodes, performs simulated FACS sorting of the cells into <code>bins</code> with the given cutoffs. <code>σ</code> refers to the spread of the phenotype during the FACS screen.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/selection.jl#L3">source</a><div><pre><code class="language-julia">select(setup, initial_cells, initial_cell_phenotypes, guides; debug)
</code></pre><p>Growth Screen selection</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/selection.jl#L56">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.sequencing" href="#Simulation.sequencing"><code>Simulation.sequencing</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">sequencing(depths, guides, samples)
</code></pre><p>Simulates next-gen sequencing by generating a Categorical distribution based on frequencies of each guide in each bin and then randomly samples from this distributions up to the depth provided in <code>depths</code> for each bin. Returns a dict of DataFrames with the bin names as the keys. This object can then be passed through <a href="internals.html#Simulation.counts_to_freqs"><code>Simulation.counts_to_freqs</code></a> followed by <a href="internals.html#Simulation.differences_between_bins"><code>Simulation.differences_between_bins</code></a>.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/sequencing.jl#L16">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.counts_to_freqs" href="#Simulation.counts_to_freqs"><code>Simulation.counts_to_freqs</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">counts_to_freqs(bin_cells, guide_count)
</code></pre><p>Converts raw counts to frequencies by dividing by the total number of reads for each sample.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/sequencing.jl#L1">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.differences_between_bins" href="#Simulation.differences_between_bins"><code>Simulation.differences_between_bins</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">differences_between_bins(raw_data; first_bin, last_bin)
</code></pre><p>Given the raw data from <a href="internals.html#Simulation.sequencing"><code>Simulation.sequencing</code></a> returns two DataFrames</p><ol><li><p><code>guide_data</code>: This DataFrame contains the per-guide level data including the  log2 fold change in the normalized frequencies of each guide between the two  bins.</p></li><li><p><code>gene_data</code>: This DataFrame contains the same information but grouped by  gene. The log2 fold change data from the first DataFrame is used to calculate  the average log2 fold change per gene and a pvalue computed using a  <a href="https://en.wikipedia.org/wiki/Mann-Whitney_U_test">Mann-Whitney U-test</a> as  measure of how consistently shifted the guides are of this gene versus the  population of negative control guides. (see below for more info)</p></li></ol><p>A typical <code>guide_data</code> DataFrame contains the following columns:</p><ul><li><p><code>gene</code>: the gene ID of that this guide targets</p></li><li><p><code>knockdown</code>: activity of the guide on 0 to 1 scale, where 1 is complete knockout</p></li><li><p><code>barcodeid</code>: the ID of this specific guide</p></li><li><p><code>theo_phenotype</code>: expected phenotype of this guide, generally a -1 to 1 scale</p></li><li><p><code>behavior</code>: whether the target gene displays a linear or sigmoidal response to knockdown</p></li><li><p><code>class</code>: whether the target gene has a positive, negative, or no phenotype during screening</p></li><li><p><code>initial_freq</code>: frequency of guide post-transfection (see <a href="internals.html#Simulation.transfect"><code>Simulation.transfect</code></a>)</p></li><li><p><code>counts_bin1</code>: the raw number of reads for each guide in the first bin</p></li><li><p><code>freqs_bin1</code>: the number of reads for each guide divided by the total number of reads in this bin</p></li><li><p><code>rel_freqs_bin1</code>: the frequency of each guide divided by the median frequency of negative control guides</p></li><li><p><code>counts_bin2</code>: the raw number of reads for each guide in the second bin</p></li><li><p><code>freqs_bin2</code>: the number of reads for each guide divided by the total number of reads in this bin</p></li><li><p><code>rel_freqs_bin2</code>: the frequency of each guide divided by the median frequency of negative control guides for this bin</p></li><li><p><code>log2fc_bin2</code>: the log2 fold change in relative guide frequencies between the two bins</p></li></ul><p>A typical <code>gene_data</code> DataFrame contains the following data:</p><ul><li><p><code>gene</code>: this gene&#39;s ID</p></li><li><p><code>behavior</code>: whether this gene displays a linear or sigmoidal response to knockdown</p></li><li><p><code>class</code>: whether this gene has a positive, negative, or no phenotype during screening</p></li><li><p><code>mean</code>: the mean log 2 fold change in relative frequencies between the two bins   for all the guides targeting this gene.</p></li><li><p><code>pvalue</code>: the -log10 pvalue of the log2 fold changes of all guides targeting   this gene as computed by the non-parametric Mann-Whitney U-test. A measure   of the consistency of the log 2 fold changes<a href="#footnote-1">[1]</a></p></li><li><p><code>absmean</code>: absolute value of <code>mean</code> per-gene</p></li><li><p><code>pvalmeanprod</code>: <code>mean</code> multiplied with the <code>pvalue</code> per-gene</p></li></ul><p><strong>Further reading</strong></p><div class="footnote" id="footnote-1"><a href="#footnote-1"><strong>[1]</strong></a><p>Kampmann M, Bassik MC, Weissman JS. Integrated platform for genome-wide screening and construction of high-density genetic interaction maps in mammalian cells. <em>Proc Natl Acad Sci U S A</em>. 2013;110:E2317–26.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/processing.jl#L1">source</a></section><h2><a class="nav-anchor" id="Miscellaneous-Types-1" href="#Miscellaneous-Types-1">Miscellaneous Types</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.Library" href="#Simulation.Library"><code>Simulation.Library</code></a> — <span class="docstring-category">Type</span>.</div><div><p>Wrapper containing all library construction parameters</p><ul><li><p><code>knockdown_dist</code></p><p>Distribution of guide knockdown efficiencies</p></li><li><p><code>knockdown_probs</code></p></li><li><p><code>max_phenotype_dists</code></p><p>Maximum phenotype categories mapped to their probability of being selected and the distribution to draw from if they are selected</p></li></ul><ul><li><p><code>phenotype_probs</code></p></li><li><p><code>kd_phenotype_relationships</code></p><p>Knockdown-phenotype relationships mapped to their probability of being selected and their respective <a href="internals.html#Simulation.KDPhenotypeRelationship"><code>Simulation.KDPhenotypeRelationship</code></a></p></li></ul><ul><li><p><code>relationship_probs</code></p></li><li><p><code>cas9_behavior</code></p><p>Whether this library is <a href="internals.html#Simulation.CRISPRi"><code>Simulation.CRISPRi</code></a> or <a href="internals.html#Simulation.CRISPRn"><code>Simulation.CRISPRn</code></a></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L89-L93">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.Barcode" href="#Simulation.Barcode"><code>Simulation.Barcode</code></a> — <span class="docstring-category">Type</span>.</div><div><p>Any entity that is tracked through the pooled experiment. For CRISPR screens, this is equivalent to the sgRNA. This object stores properties relating to the performance of this entity in the screen.</p><ul><li><p><code>gene</code></p><p>The target gene id</p></li><li><p><code>knockdown</code></p><p>The knockdown efficiency</p></li><li><p><code>theo_phenotype</code></p><p>The theoretical phenotype exerted</p></li><li><p><code>obs_phenotype</code></p><p>The observed phenotype (only relevant for FACS screens)</p></li><li><p><code>behavior</code></p><p>The gene behavior, either sigmoidal or linear</p></li><li><p><code>class</code></p><p>The gene activity class, either inactive, up or down</p></li><li><p><code>initial_freq</code></p><p>Initial frequency after transfection</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/common.jl#L3-L9">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.KDPhenotypeRelationship" href="#Simulation.KDPhenotypeRelationship"><code>Simulation.KDPhenotypeRelationship</code></a> — <span class="docstring-category">Type</span>.</div><div><p>A type representing a relationship between degree of knockdown and effect on phenotype</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L24-L27">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.Cas9Behavior" href="#Simulation.Cas9Behavior"><code>Simulation.Cas9Behavior</code></a> — <span class="docstring-category">Type</span>.</div><div><p>A type representing the behavior of different Cas9s</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L54-L56">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.CRISPRn" href="#Simulation.CRISPRn"><code>Simulation.CRISPRn</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type CRISPRn &lt;: Simulation.Cas9Behavior</code></pre><p>CRISPR KO behavior is more complex since sgRNA-directed DNA damage repair is stochastic. We assume that 2/3 of repair events at a given locus lead to a frameshift, and that the screen is carried out in diploid cells. The assumption that only bi-allelic frame-shift mutations lead to a phenotype in CRISPRn screens for most sgRNAs is supported by the empirical finding that in-frame deletions mostly do not show strong phenotypes, unless they occur in regions encoding conserved residues or domains<a href="#footnote-2">[2]</a></p><div class="footnote" id="footnote-2"><a href="#footnote-2"><strong>[2]</strong></a><p>Horlbeck MA, Gilbert LA, Villalta JE, Adamson B, Pak RA, Chen Y, Fields AP, Park CY, Corn JE, Kampmann M, Weissman JS: Compact and highly active next- generation libraries for CRISPR-mediated gene repression and activation. <em>Elife</em> 2016, 5.</p></div></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L66">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.CRISPRi" href="#Simulation.CRISPRi"><code>Simulation.CRISPRi</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type CRISPRi &lt;: Simulation.Cas9Behavior</code></pre><p>CRISPRi behavior is simply determined by the activity of the guide</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L59">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.Delta" href="#Simulation.Delta"><code>Simulation.Delta</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-julia">type Delta &lt;: Distributions.Sampleable{Distributions.Univariate,Distributions.Discrete}</code></pre><p>Constructs a delta function at a given δ value. This distribution always emits the same value.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L253">source</a></section><h2><a class="nav-anchor" id="Miscellaneous-functions-1" href="#Miscellaneous-functions-1">Miscellaneous functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.signal" href="#Simulation.signal"><code>Simulation.signal</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">signal(bc_counts)
</code></pre><p>Computes the signal in an experiment, where the experimental signal is defined to be the average of signal of true hit genes. That value, the true hit gene signal, is the average ratio of the log2 fold change for a guide targeting a specific gene to the guide&#39;s theoretical phenotype.</p><div>\[\frac{1}{N_{true} \times k} \sum_{i=1}^{N_{true}} \sum_{j=1}^k
\frac{\log_2 fc_{ij}}{\text{theo phenotype}_{ij}}\]</div><p>where <span>$N_{true}$</span> is the number of true hit genes and <span>$k$</span> is the number of genes.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/utils.jl#L138">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.noise" href="#Simulation.noise"><code>Simulation.noise</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">noise(bc_counts)
</code></pre><p>Computes the noise in an experiment, where noise is defined to be the standard deviation of log2 fold change in the negative controls</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/utils.jl#L127">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.linear" href="#Simulation.linear"><code>Simulation.linear</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">linear(x, l)
</code></pre><p>Given value(s) <code>x</code> apply a simple linear function with maximum value <code>l</code></p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L17">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.sigmoid" href="#Simulation.sigmoid"><code>Simulation.sigmoid</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">sigmoid(x, l, k, p)
</code></pre><p>Given value(s) <code>x</code> apply the sigmoidal function with maximum value <code>l</code>, a steepness <code>k</code>, and an inflection point <code>p</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/library.jl#L3">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.auprc" href="#Simulation.auprc"><code>Simulation.auprc</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">auprc(scores, classes, pos_labels; rev)
</code></pre><p>Computes the area under the Precision-Recall curve using a lower trapezoidal estimator, which is more accurate for skewed datasets.</p><p>K. Boyd, K. H. Eng, and C. D. Page, “Area under the Precision-Recall Curve: Point Estimates and Confidence Intervals,” in Machine Learning and Knowledge Discovery in Databases, H. Blockeel, K. Kersting, S. Nijssen, and F. Železný, Eds. Springer Berlin Heidelberg, 2013, pp. 451–466.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/utils.jl#L50">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.auroc" href="#Simulation.auroc"><code>Simulation.auroc</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">auroc(scores, classes, pos_labels; rev)
</code></pre><p>Optimized function for computing the area under the receiver operator characteristic curve.</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/utils.jl#L13">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Simulation.venn" href="#Simulation.venn"><code>Simulation.venn</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-julia">venn(scores, classes, pos_labels; rev)
</code></pre><p>Given <code>N</code> positive examples, computes the percentage of the top <code>N/2</code> hits that are correct</p></div><a class="source-link" target="_blank" href="https://github.com/tlnagy/Crispulator.jl/blob/8d8757d9d507197f8c17c553fd7d5ce6de5a50be/src/simulation/utils.jl#L103">source</a></section><footer><hr/><a class="previous" href="custom.html"><span class="direction">Previous</span><span class="title">Custom Simulations</span></a></footer></article></body></html>
